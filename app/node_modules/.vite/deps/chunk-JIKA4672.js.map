{
  "version": 3,
  "sources": ["../../vite-ssr/vue/components.js", "../../vite-ssr/utils/route.js", "../../vite-ssr/vue/utils.js", "../../vite-ssr/utils/defer.js", "../../vite-ssr/utils/response.js"],
  "sourcesContent": ["import { ref, onMounted, defineComponent, inject } from 'vue';\nexport const ClientOnly = defineComponent({\n    name: 'ClientOnly',\n    setup(_, { slots }) {\n        const show = ref(false);\n        onMounted(() => {\n            show.value = true;\n        });\n        return () => (show.value && slots.default ? slots.default() : null);\n    },\n});\nconst CONTEXT_SYMBOL = Symbol();\nexport function provideContext(app, context) {\n    app.provide(CONTEXT_SYMBOL, context);\n}\nexport function useContext() {\n    return inject(CONTEXT_SYMBOL);\n}\n", "const S = '/';\nexport function withPrefix(string, prefix) {\n    return string.startsWith(prefix) ? string : prefix + string;\n}\nexport function withoutPrefix(string, prefix) {\n    return string.startsWith(prefix) ? string.slice(prefix.length) : string;\n}\nexport function withSuffix(string, suffix) {\n    return string.endsWith(suffix) ? string : string + suffix;\n}\nexport function withoutSuffix(string, suffix) {\n    return string.endsWith(suffix) ? string.slice(0, -1 * suffix.length) : string;\n}\nexport function createUrl(urlLike) {\n    if (typeof urlLike === 'string' && !(urlLike || '').includes('://')) {\n        urlLike = 'http://e.g' + withPrefix(urlLike, S);\n    }\n    return new URL(urlLike.toString());\n}\nexport function getFullPath(url, routeBase) {\n    url = createUrl(url);\n    url.pathname = withSuffix(url.pathname, S);\n    let fullPath = withoutPrefix(url.href, url.origin);\n    if (routeBase) {\n        routeBase = withSuffix(withPrefix(routeBase, S), S);\n        if (fullPath.indexOf(routeBase) === 0) {\n            fullPath = withPrefix(fullPath.replace(routeBase, ''), S);\n        }\n    }\n    return fullPath;\n}\n", "export function addPagePropsGetterToRoutes(routes) {\n    routes.forEach((staticRoute) => {\n        const originalProps = staticRoute.props;\n        staticRoute.props = (route) => {\n            const resolvedProps = originalProps === true\n                ? route.params\n                : typeof originalProps === 'function'\n                    ? originalProps(route)\n                    : originalProps;\n            return {\n                ...(route.meta.hmr || {}).value,\n                ...(route.meta.state || {}),\n                ...(resolvedProps || {}),\n            };\n        };\n    });\n}\n", "export function defer() {\n    const deferred = { status: 'pending' };\n    deferred.promise = new Promise((resolve, reject) => {\n        deferred.resolve = (value) => {\n            deferred.status = 'resolved';\n            return resolve(value);\n        };\n        deferred.reject = (error) => {\n            deferred.status = 'rejected';\n            return reject(error);\n        };\n    });\n    return deferred;\n}\n", "import { defer } from './defer';\nconst isRedirect = ({ status = 0 }) => status >= 300 && status < 400;\nexport function useSsrResponse() {\n    const deferred = defer();\n    let response = {};\n    const writeResponse = (params) => {\n        Object.assign(response, params);\n        if (isRedirect(params)) {\n            // Stop waiting for rendering when redirecting\n            deferred.resolve(response);\n        }\n    };\n    return {\n        deferred,\n        response,\n        writeResponse,\n        isRedirect: () => isRedirect(response),\n        redirect: (location, status = 302) => writeResponse({ headers: { location }, status }),\n    };\n}\nconst externalRedirect = (location) => {\n    window.location.href = location;\n};\nexport function useClientRedirect(spaRedirect = externalRedirect) {\n    return {\n        writeResponse: () => console.warn('[SSR] Do not call writeResponse in browser'),\n        redirect: (location, status) => {\n            return location.startsWith('/')\n                ? spaRedirect(location)\n                : externalRedirect(location);\n        },\n    };\n}\n"],
  "mappings": "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",
  "names": []
}
